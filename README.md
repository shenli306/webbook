# 📚 小说下载器 WebBook

一个基于Flask和爬虫技术的在线小说搜索与下载工具，支持从奇书网获取小说信息并下载为EPUB格式喵～

## ✨ 功能特性

- 🔍 **智能搜索**：支持小说名称搜索，实时获取搜索结果
- 📖 **详情展示**：显示小说标题、作者、章节数和简介信息
- 📥 **EPUB下载**：支持指定章节范围下载为标准EPUB格式
- 🎨 **现代UI**：响应式设计，支持移动端访问
- 🐛 **调试友好**：完整的日志系统，便于问题排查

## 🛠️ 技术栈

### 后端
- **Flask** - Web框架
- **requests** - HTTP请求库
- **BeautifulSoup4** - HTML解析
- **ebooklib** - EPUB文件生成

### 前端
- **原生JavaScript** - 交互逻辑
- **CSS3** - 样式设计
- **响应式布局** - 移动端适配

## 📦 安装依赖

```bash
pip install flask requests beautifulsoup4 ebooklib
```

## 🚀 快速开始

1. **启动服务器**
   ```bash
   python app.py
   ```

2. **访问应用**
   打开浏览器访问：`http://localhost:5000`

3. **使用步骤**
   - 在搜索框输入小说名称
   - 点击搜索按钮获取结果
   - 选择目标小说查看详情
   - 设置下载章节范围
   - 点击下载按钮获取EPUB文件

## 📁 项目结构

```
webbook/
├── app.py              # Flask主应用
├── qishu_spider.py     # 爬虫核心模块
├── templates/
│   └── index.html      # 前端页面
└── README.md           # 项目说明
```

## 🔧 核心模块说明

### app.py
- Flask路由定义
- API接口实现
- 文件下载处理

### qishu_spider.py
- 网站爬虫逻辑
- 数据解析处理
- EPUB文件生成

### templates/index.html
- 用户界面设计
- 前后端交互
- 响应式布局

## 🐛 最近修复

### 作者信息解析优化
- **问题**：部分小说显示"未知作者"
- **原因**：网站结构变化，作者信息位置调整
- **解决方案**：
  1. 优先从页面标题提取作者信息
  2. 使用正则表达式 `\(([^)]+)\)` 匹配括号内容
  3. 保留多重备用解析方案
  4. 增强调试日志输出

## 🎯 使用注意事项

1. **网络环境**：确保网络连接稳定
2. **访问频率**：避免过于频繁的请求
3. **版权声明**：仅供学习交流使用
4. **文件路径**：下载文件保存在系统下载目录

## 🔍 调试信息

应用包含详细的调试日志，包括：
- 搜索请求处理
- 数据解析过程
- 错误信息输出
- 性能监控数据

## 📝 开发日志

- ✅ 基础搜索功能实现
- ✅ 小说详情页面解析
- ✅ EPUB文件生成
- ✅ 作者信息解析修复
- ✅ 前端界面优化

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

## 📄 许可证

本项目仅供学习交流使用，请遵守相关法律法规。

---

*Made with ❤️ by 猫娘程序员* 🐱‍💻